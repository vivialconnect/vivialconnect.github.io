<!DOCTYPE html>
    <html lang="en">
      <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Vivial Connect PHP Library</title>
        <link rel="stylesheet" href="/css/github-markdown.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="shortcut icon" href="/img/favicon.png'">
      </head>
 <body class="markdown-body">
      <header style="padding-left: 0px">
        <img src="/img/logo.png"><br>
      </header>
      <h1 id="vivialconnectphplibrary">Vivialconnect PHP Library</h1>
<p>A simple PHP library for using the <a href="https://www.vivialconnect.net/">Vivial Connect REST API</a> to send and receiving text messages. For a complete description of all features visit the <a href="https://vivialconnect.github.io/vivialconnect-php/">full API reference</a>.</p>
<h2 id="installation">Installation</h2>
<p>The installation of Composer is really simple:</p>
<pre><code class="php language-php">curl -s http://getcomposer.org/installer | php -- --install-dir=bin
</code></pre>
<p>Next, run the Composer command to install the latest stable version of VivialConnect PHP client:</p>
<pre><code class="php language-php">php composer.phar require vivialconnect/sdk
</code></pre>
<p>You can also manually add metadata into your local composer.json file, at the top level of the project:</p>
<pre><code class="php language-php">{
    "require": {
        "vivialconnect/sdk": "0.1"
    }
}
</code></pre>
<p>Run the composer install command:</p>
<pre><code class="php language-php">composer.phar install
</code></pre>
<p>In the last step you will include composer autogenerated autoload.php file into your project, and you are ready to go:</p>
<pre><code class="php language-php">require 'vendor/autoload.php';
</code></pre>
<p>You can then later update VivialConnect PHP client using composer:</p>
<pre><code class="php language-php">php composer.phar update
</code></pre>
<h2 id="usage">Usage</h2>
<h3 id="gettingstarted">Getting Started</h3>
<p>Before using the Vivial Connect PHP library you will need to create a Vivial Connect account:</p>
<ol>
<li><a href="https://www.vivialconnect.net/register/">Register</a> a new account </li>
<li>Go to the accounts page, and get your account number, API key and API secret.</li>
</ol>
<p>Next, initialize your PHP application with this information:</p>
<pre><code class="php language-php">require __DIR__ . '/vendor/autoload.php';

use VivialConnect\Resources\Resource;

Resource::setCredentialToken(Resource::API_KEY, "my-api-key");
Resource::setCredentialToken(Resource::API_SECRET, "my-api-secret");
Resource::setCredentialToken(Resource::API_ACCOUNT_ID, "12345678");
Resource::init();
</code></pre>
<h3 id="purchaseanumber">Purchase a Number</h3>
<p>When purchasing a number, you must first find available numbers:</p>
<pre><code class="php language-php">use VivialConnect\Resources\Number;

function listAvailableNumbers($countryCode = 'US', $phoneNumberType = 'local',
                              $areaCode = '913', $page = 1, $limit = 20)
{
    $qs = ['page' =&gt; $page, 'limit' =&gt; $limit, 'area_code' =&gt; $areaCode];
    $numbers = Number::searchAvailable($countryCode, $phoneNumberType, $qs);
    foreach ($numbers as $key =&gt; $number)
    {
        printf("name = %s\n", $number-&gt;name);
        printf("phone_number = %s\n", $number-&gt;phone_number);
        printf("phone_number_type = %s\n", $number-&gt;phone_number_type);
        print("\n");
    }
}

listAvailableNumbers();
</code></pre>
<p>Then buy one:</p>
<pre><code class="php language-php">function buyNumber($name, $phoneNumber,
                   $areaCode, $phoneNumberType = 'local')
{
    $number = new Number;
    $number-&gt;name = $name;
    $number-&gt;phone_number = $phoneNumber;
    $number-&gt;area_code = $areaCode;
    $number-&gt;phone_number_type = $phoneNumberType;
    $number-&gt;buy();
}

buyNumber('(123) 259-7591', '+11232597591', '123');
</code></pre>
<h3 id="sendamessage">Send a Message</h3>
<pre><code class="php language-php">use VivialConnect\Resources\Message;

function sendMessage($body, $fromNumber, $toNumber)
{
    $message = new Message;
    $message-&gt;body = $body;
    $message-&gt;from_number = $fromNumber;
    $message-&gt;to_number = $toNumber;
    $message-&gt;send();
}

sendMessage('Howdy, from Vivial Connect!',
            '+10982599999', '+11234561111');
</code></pre>

<!-- ### Get Message Status

<pre><code>TODO
</code></pre> -->

<h2 id="requirements">Requirements</h2>
<ul>
<li>An active <a href="https://www.vivialconnect.net/register/">Vivial Connect</a> account </li>
<li>Any flavour of PHP 5.3.3+</li>
<li>Guzzle - PHP HTTP client</li>
<li>Onion - standalone middleware library</li>
</ul>
<h2 id="limitations">Limitations</h2>
<p>Currently, the Vivial Connect PHP Library doesnâ€™t support asynchronous requests.</p>
<h2 id="usefulresources">Useful Resources</h2>
<ul>
<li><a href="https://vivialconnect.github.io/vivialconnect-php/">Full PHP Library Documentation</a></li>
<li><a href="https://www.vivialconnect.net/docs/">Vivial Connect REST API Documentation</a></li>
<li><a href="https://vivialconnect.github.io/">Libraries for other languages</a></li>
</ul>
    </body>
  </html>